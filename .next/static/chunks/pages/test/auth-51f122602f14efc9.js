(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{48728:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/test/auth",function(){return c(92516)}])},92516:function(e,b,a){"use strict";a.r(b);var f=a(47568),c=a(34051),g=a.n(c),h=a(85893),i=a(96938),j=a(67294),d=a(9669),k=a.n(d);b.default=function(){var c,a=(0,j.useState)(""),d=a[0],l=a[1],b=(0,i.Os)();(0,i.Rc)().connection,(0,j.useEffect)(function(){var a;(a=(0,f.Z)(g().mark(function a(){var c,d,e,f;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b){a.next=2;break}return a.abrupt("return");case 2:return c="http://localhost:5000/api/accounts/",a.prev=3,a.next=6,k().post(c,{wallet:b.publicKey});case 6:d=a.sent,console.log(d.data.nonce),l(d.data.nonce),a.next=19;break;case 11:if(a.prev=11,a.t0=a.catch(3),!k().isAxiosError(a.t0)){a.next=18;break}return f=a.t0,console.log(null===(e=f.response)|| void 0===e?void 0:e.data.message),a.abrupt("return");case 18:console.log(a.t0);case 19:case"end":return a.stop()}},a,null,[[3,11]])})),function(){return a.apply(this,arguments)})()},[b]);var e=(c=(0,f.Z)(g().mark(function a(){var c,e,f,h,i;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=new Date().getTime(),e="GET/accounts/myDetails".concat(c).concat(d),b.signMessage){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,b.signMessage(new TextEncoder().encode(e));case 6:return a.next=8,a.sent;case 8:if(f=a.sent,console.log(JSON.stringify(f)),console.log(f.toString()),b.publicKey){a.next=13;break}return a.abrupt("return");case 13:return h="http://localhost:5000/api/accounts/myDetails",a.next=16,k().get(h,{headers:{"drop-pubkey":b.publicKey.toString(),"drop-nonce":d,"drop-signature":JSON.stringify(f),"drop-timestamp":c}});case 16:i=a.sent,console.log(i.data);case 18:case"end":return a.stop()}},a)})),function(){return c.apply(this,arguments)});return(0,h.jsx)("div",{className:"container mx-auto flex-col",children:b?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("p",{children:["nonce: ",d]}),(0,h.jsx)("button",{onClick:e,children:"get wallet data"})]}):(0,h.jsx)("p",{children:"Connect the wallet"})})}}},function(a){a.O(0,[217,774,888,179],function(){var b;return a(a.s=48728)}),_N_E=a.O()}])